---
title: "Interactive Shade Routing Calculator"
format:
  html:
    toc: false
---

## Calculate Your Own Routes

This interactive map allows you to calculate shade-optimized routes between any two points in University City Philadelphia.

### How to Use

1. **Click** anywhere on the map to set your starting point (origin)
2. **Click again** to set your destination
3. **View** both the shortest route (blue) and shadiest route (green)
4. **Compare** distance vs. shade trade-offs
5. **Switch scenarios** to see seasonal/temporal variations

### Features

- ‚úì Real-time route calculation (runs in your browser!)
- ‚úì Click-to-select interface
- ‚úì Shortest vs. shadiest route comparison
- ‚úì 8 temporal scenarios (summer, winter, morning, evening)
- ‚úì Detailed metrics (distance, shade, detour %)

---

<div style="border: 2px solid #667eea; border-radius: 8px; padding: 20px; margin: 20px 0;">
<p style="text-align: center; font-size: 1.2em; color: #667eea;">
<strong>üìç Interactive Map Coming Soon</strong>
</p>
<p style="text-align: center;">
The interactive routing calculator will be embedded here after Notebook 5 data preparation completes.
</p>
<p style="text-align: center; margin-top: 20px;">
For now, you can explore the static route comparisons in the <a href="results.qmd">Results</a> section.
</p>
</div>

---

## How It Works

### Client-Side Routing

The interactive map implements Dijkstra's algorithm entirely in JavaScript:

```javascript
// Simplified routing logic
function calculateRoute(origin, destination, scenario, useShade) {
    const cost = (edge) => {
        if (useShade) {
            return edge.length * (1 - 0.3 * edge.shade[scenario]);
        } else {
            return edge.length;
        }
    };
    
    return dijkstra(graph, origin, destination, cost);
}
```

### Data Format

The map uses pre-processed network data (from Notebook 5):

- **nodes.json** - Network intersections with coordinates
- **edges.json** - Street segments with shade scores for all scenarios
- **stops.json** - SEPTA station locations
- **metadata.json** - Scenario information and bounds

### Performance

- Network size: 23,486 edges
- Route calculation: <100ms
- No backend required (all processing client-side)
- Works offline after initial data load

---

## Example Use Cases

### Use Case 1: Daily Commute

**Scenario:** Walking from home to 40th St Station in summer

**Input:**
- Origin: 3900 Spruce St
- Destination: 40th St Station
- Scenario: Summer Midday

**Output:**
- Shortest: 780m, 9 min walk, 0.25 average shade
- Shadiest: 850m (+9%), 10 min walk (+1 min), 0.42 average shade (+68%)

**Decision:** Worth the extra minute for significantly more shade on a hot day!

---

### Use Case 2: Visitor Navigation

**Scenario:** Tourist walking to Penn Museum

**Input:**
- Origin: 30th Street Station
- Destination: Penn Museum
- Scenario: Summer Afternoon

**Output:**
- Routes calculated with shade optimization
- Recommends walking through campus (more trees) rather than Market St

---

## Technical Implementation

The interactive map uses:

- **Leaflet.js** for mapping
- **Turf.js** for geospatial operations
- **Custom Dijkstra** implementation in JavaScript
- **React** (optional) for UI components

Full code available in project repository.

---

[‚Üê Back to Results](results.qmd) | [View Technical Details ‚Üí](appendix.qmd)
