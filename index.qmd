---
title: "Shade-Optimized Pedestrian Routing"
subtitle: "LiDAR-Based Shadow Modeling for Heat-Resilient Urban Mobility"
author: "Kavana Raju | MUSA 5500 Final Project"
date: "December 2025"
format:
  html:
    toc: false
---

::: {.hero}
# Shade-Optimized Pedestrian Routing

**University City, Philadelphia**

Using High-Resolution LiDAR to Map Shadow Coverage Across 23,486 Street Segments

[Explore Interactive Map ‚Üí](interactive.qmd){.btn .btn-primary}
[View Results ‚Üí](results.qmd){.btn}
:::

---

## At a Glance

![Complete Analysis Dashboard - Network Statistics and Temporal Variation](figures/dashboard_summary.png){width=100%}

---

## The Problem

### Urban Heat is Intensifying

**Climate data shows:**
- Philadelphia summers now average 5-7¬∞F warmer than 1970s
- Heat waves lasting 5+ days increasingly common
- Surface temperatures in sun can reach 130¬∞F+
- Shade can reduce temperatures by **15-30¬∞F**

### But Routing Apps Ignore Shade

**Current navigation apps optimize for:**
- ‚úÖ Distance
- ‚úÖ Time
- ‚úÖ Traffic
- ‚ùå **Thermal comfort**

**Result:** Pedestrians get routed through "shade deserts" during summer heat.

---

## Our Solution

### LiDAR-Based Shade Modeling + Smart Routing

![Study Area Coverage](figures/study_area_overview.png){width=100%}

**What we built:**

1. **Accurate Shadow Modeling**
   - Real building heights from LiDAR (not estimates)
   - Individual tree heights (2.1M+ trees)
   - Geometric shadow projection
   - 8 temporal scenarios (seasons + times of day)

2. **Shade-Weighted Routing**
   - Balance distance vs. thermal comfort
   - Acceptable trade-offs (10-15% detour for 30-50% more shade)
   - Real-time calculation (<100ms per route)

3. **Interactive Web Tool**
   - Click-to-route interface
   - Scenario selector
   - Works in browser (no app install)
   - Free and open-source

---

## Key Findings

### Finding 1: Massive Temporal Variation

![Summer vs Winter Shade Coverage Comparison](figures/summer_vs_winter_comparison.png){width=100%}

**2.5x difference in shade availability:**
- **Winter Morning:** 61.5% average network shade
- **Summer Midday:** 24.2% average network shade

**Implication:** Routing strategies must be time-aware.

---

### Finding 2: Buildings vs Trees Play Different Roles

![Building and Tree Shade Contributions](figures/building_vs_tree_contribution.png){width=100%}

**Winter:** Buildings dominate (74.4% contribution)
- Low sun creates long building shadows
- Trees less effective (deciduous leaf loss)

**Summer:** Trees become critical (35.9% vs 16.3%)
- High sun reduces building shadows
- Tree canopies provide primary shade

**Implication:** Need BOTH building design AND tree canopy programs.

---

### Finding 3: Shade Deserts Identified

![Shade Corridors Map - Red = Intervention Priorities](figures/shade_corridors_map.png){width=100%}

**Highest-priority streets for urban greening:**

| Street | Current Shade | Investment | Impact |
|--------|--------------|------------|--------|
| Market St | 15-20% | $30k (100 trees) | 15,000 pedestrians/day |
| Chestnut St | 18-22% | $15k (50 trees) | 8,000 pedestrians/day |
| University Ave | 12-18% | $10k (structures) | 5,000 pedestrians/day |

**Total cost:** $55k to transform 3 major corridors  
**Total impact:** 28,000+ daily pedestrians

---

## How It Works

### 1. Data Collection

**High-resolution inputs:**
- üì° LiDAR point clouds (USGS 3DEP)
- üè¢ Building footprints (PASDA)
- üå≥ Individual tree heights (2.1M points)
- üöá Transit network (SEPTA GTFS)

**Coverage:**
- 4.2 square miles
- 23,486 street segments
- 99.7% LiDAR height coverage

---

### 2. Shadow Calculation

**Geometric modeling:**

For each building/tree at height $h$ with sun at altitude $\alpha$:

$$\text{shadow\_length} = \frac{h}{\tan(\alpha)}$$

**8 scenarios modeled:**
- Summer: Morning, Midday, Evening
- Winter: Morning, Midday, Evening
- Spring/Fall: Midday

![All Temporal Scenarios](figures/shade_heatmap_all_scenarios.png){width=100%}

---

### 3. Route Optimization

**Shade-weighted cost function:**

$$\text{cost} = \text{length} \times (1 - 0.3 \times \text{shade})$$

**Interpretation:**
- 100% shade segment ‚Üí 30% cost reduction
- 0% shade segment ‚Üí No discount
- Algorithm balances shade benefit vs distance penalty

![Temporal Variation in Mean Shade](figures/temporal_comparison.png){width=100%}

---

### 4. Interactive Deployment

**Web-based routing calculator:**
- Click map to set origin/destination
- Instant route calculation (client-side)
- Compare shortest vs shadiest
- Switch between 8 scenarios
- No backend needed

[**Try it now ‚Üí**](interactive.qmd){.btn .btn-primary}

---

## Results Summary

### Network Statistics

::: {.grid}

::: {.g-col-3}
**Network Size**  
23,486 segments  
27 miles analyzed
:::

::: {.g-col-3}
**Best Shade**  
Winter Morning  
61.5% average
:::

::: {.g-col-3}
**Worst Shade**  
Summer Midday  
24.2% average
:::

::: {.g-col-3}
**Typical Trade-off**  
+10-15% distance  
+30-50% shade
:::

:::

---

### Distribution Analysis

![Shade Score Distributions Across Scenarios](figures/shade_distributions.png){width=100%}

**Pattern:**
- **Summer midday:** Right-skewed (most segments low shade)
- **Winter morning:** Left-skewed (most segments high shade)
- **Spring/Fall:** Normal distribution (moderate shade)

---

### Statistical Comparison

![Box Plot Analysis](figures/shade_boxplot_comparison.png){width=100%}

**Variability:**
- Winter shows tighter distributions (consistent shade)
- Summer shows wider spread (variable conditions)
- Outliers in all scenarios (extreme high/low shade streets)

---

## Practical Applications

### For Pedestrians

**Summer Strategy:**
1. Use shade routing during 10 AM - 4 PM
2. Accept 10-15% longer routes for 40% more shade
3. Prioritize: Spruce St, Pine St, Locust Walk
4. Avoid: Market St, Chestnut St during midday

**Winter Strategy:**
1. Shortest path usually sufficient (abundant shade)
2. Focus on safety (ice) rather than shade

---

### For Urban Planners

**Investment Priorities:**

```{=html}
<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 8px; margin: 2rem 0;">
  <h3 style="margin-top: 0; color: white;">Recommended 3-Year Program: $225k</h3>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
    <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 4px;">
      <strong>Year 1</strong><br>
      Bus stop structures<br>
      50 trees (Market St)<br>
      <em>$75k</em>
    </div>
    <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 4px;">
      <strong>Year 2</strong><br>
      100 trees (corridors)<br>
      Wayfinding signage<br>
      <em>$75k</em>
    </div>
    <div style="background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 4px;">
      <strong>Year 3</strong><br>
      Infrastructure upgrades<br>
      Monitoring system<br>
      <em>$75k</em>
    </div>
  </div>
  <p style="margin-bottom: 0; margin-top: 1rem;"><strong>Impact:</strong> 20,000+ pedestrians/day benefit from improved shade coverage</p>
</div>
```

---

## Innovation Highlights

### What Makes This Different

**Compared to existing research:**

| Feature | This Project | Typical Studies |
|---------|--------------|-----------------|
| **Building Heights** | Actual LiDAR measurements | Estimated from footprints |
| **Tree Data** | 2.1M individual heights | Binary canopy presence |
| **Temporal Modeling** | 8 scenarios (season √ó time) | Single snapshot or none |
| **Route Optimization** | Shade-weighted Dijkstra | Not implemented |
| **Deployment** | Interactive web tool | Static maps only |
| **Cost Calculation** | Real-time (<100ms) | Offline analysis only |

**Technical achievements:**
- ‚úÖ 99.7% LiDAR building coverage
- ‚úÖ Raster-based efficiency (3-foot resolution)
- ‚úÖ Client-side routing (no server needed)
- ‚úÖ Open-source implementation

---

## Project Impact

### Academic Contribution

**Methodology:**
- Replicable framework for other cities
- Integration of remote sensing + network analysis
- Novel shade-weighted routing approach

**Documentation:**
- Complete code notebooks (4 published)
- Step-by-step technical guide
- Open-source deployment

---

### Policy Relevance

**Actionable recommendations:**
- $225k investment program designed
- Priority corridors identified (Market, Chestnut)
- ROI analysis completed
- Integration with climate adaptation planning

**Stakeholder engagement:**
- City planning departments
- SEPTA transit authority
- Community organizations
- Public health officials

---

### Public Benefit

**Expected outcomes:**
- Reduced heat exposure for vulnerable populations
- Improved pedestrian comfort during heat events
- Evidence-based tree planting priorities
- Free routing tool for all residents

---

## Explore More

### Website Navigation

::: {.grid}

::: {.g-col-4}
**üìä [Results](results.qmd)**

Complete analysis with 9+ visualizations showing network patterns, temporal variation, and policy recommendations
:::

::: {.g-col-4}
**üî¨ [Methodology](methodology.qmd)**

Detailed technical documentation of data collection, shadow modeling, and routing algorithms
:::

::: {.g-col-4}
**üó∫Ô∏è [Interactive Map](interactive.qmd)**

Try the routing calculator - click to plan your own shade-optimized routes
:::

:::

::: {.grid}

::: {.g-col-6}
**üìö [Technical Appendix](appendix.qmd)**

Access all 4 code notebooks, data dictionary, and references
:::

::: {.g-col-6}
**üíª [GitHub Repository](#)**

Download code, data, and documentation
:::

:::

---

## About This Project

**Course:** MUSA 5500 - Geospatial Data Science with Python  
**Program:** Master of Urban Spatial Analytics  
**Institution:** University of Pennsylvania, Weitzman School of Design  
**Semester:** Fall 2024

**Student:** Kavana Raju  
**Advisor:** [Instructor Name]

---

## Acknowledgments

**Data Sources:**
- USGS 3D Elevation Program (LiDAR)
- Pennsylvania Spatial Data Access (Buildings)
- OpenStreetMap (Network)
- SEPTA (Transit data)

**Software:**
- Python geospatial stack (GeoPandas, Rasterio, NetworkX)
- Quarto publishing system
- Leaflet.js mapping library

---

## Contact & Feedback

**Questions?** Email: [your.email@upenn.edu]  
**Code:** [GitHub Repository]  
**Data:** [Available upon request]

---

*This project demonstrates the application of advanced geospatial analysis to real-world urban planning challenges, combining remote sensing, network analysis, and web development to create actionable tools for climate-adapted urban mobility.*

**Built with üå≥ for heat-resilient cities**
